FROM restreamio/gstreamer:$TARGET_ARCH-dev-dependencies

ARG GSTREAMER_VERSION=1.22.12

ARG GSTREAMER_CEF_REPOSITORY=https://github.com/restreamio/gstcefsrc
# fix/pts: audio/video pts improvements
ARG GSTREAMER_CEF_CHECKOUT=b324338406239326099202b61005873b4c038e2a

COPY docker/cef-config.sh /.cef-config.sh

COPY docker/sccache.toml /sccache.toml

COPY docker/build-gstreamer/download /download

RUN ["/download"]

COPY docker/build-gstreamer/compile /compile
COPY docker/build-gstreamer/patch /compile-patch
